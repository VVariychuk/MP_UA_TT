(this["webpackJsonpmp-tt"]=this["webpackJsonpmp-tt"]||[]).push([[0],{16:function(e,t,n){e.exports={overlay:"Modal_overlay__1LWxe","modal-window":"Modal_modal-window__RcTyk"}},27:function(e,t,n){e.exports={sheet:"Gallery_sheet__2XYby"}},28:function(e,t,n){e.exports={input:"SearchInput_input__2zwmu"}},29:function(e,t,n){e.exports={button:"Button_button__2uGdb"}},30:function(e,t,n){e.exports={"search-form":"SearchForm_search-form__1jg8-"}},31:function(e,t,n){e.exports={container:"container_container__DEeuN"}},40:function(e,t,n){},41:function(e,t,n){},5:function(e,t,n){e.exports={wrapper:"styles_wrapper__ie2UK",input:"styles_input__34bgH",button:"styles_button__i9hNZ","load-more-button":"styles_load-more-button__1LzkJ",message:"styles_message__1y_Mr"}},8:function(e,t,n){e.exports={item:"GalleryItem_item__2fmVb","image-wrapper":"GalleryItem_image-wrapper__10kqP",image:"GalleryItem_image__10GSB",description:"GalleryItem_description__2XOCa"}},81:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(11),r=n.n(c),s=(n(40),n(41),n(18)),i=n(3),o=n(34),l=n(7),u=Object(a.createContext)(),d=u.Provider,j=u.Consumer,b=n(0),h=function(e){return function(t){return Object(b.jsx)(j,{children:function(n){return Object(b.jsx)(e,Object(l.a)(Object(l.a)({},t),{},{API:n}))}})}},m=n(8),p=n.n(m),O=function(e){var t=e.src,n=e.fullSrc,a=e.alt,c=void 0===a?"":a,r=(e.className,e.name),s=e.createdAt,i=e.imgClickHandler;return Object(b.jsx)("li",{id:"item",className:p.a.item,children:Object(b.jsxs)("div",{id:"imageWrapper",className:p.a["image-wrapper"],onClick:function(e){return i(e,n)},children:[Object(b.jsx)("img",{src:t,alt:c,className:p.a.image}),Object(b.jsxs)("div",{id:"description",className:p.a.description,children:[Object(b.jsxs)("span",{children:["created at: ",s]}),Object(b.jsxs)("span",{children:["by: ",r]})]})]})})},f=n(27),_=n.n(f),g=function(e){var t=e.remoteData,n=e.imgClickHandler,a=e.size;return Object(b.jsx)(b.Fragment,{children:t.length>0?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("ul",{className:_.a.sheet,children:t.map((function(e){var t,c=e.id,r=e.urls,s=e.alt_description,i=e.user,o=e.created_at,l="".concat(r.raw,"&w=").concat(.92*a.width,"&h=").concat(.92*a.height);return Object(b.jsx)(O,{src:r.small,fullSrc:l,alt:s,name:i.name,createdAt:(t=o,t.split("T")[0].split("-").reverse().join(".")),imgClickHandler:n},c)}))})}):Object(b.jsx)("div",{})})},v=n(28),x=n.n(v),y=function(e){var t=e.value,n=void 0===t?"":t,a=e.name,c=void 0===a?"searchInput":a,r=e.onChangeHandler,s=e.className,i=void 0===s?"":s,o=e.placeholder,l=void 0===o?"":o,u=e.queriesList;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("input",{type:"text",value:n,name:c,onChange:r,className:"".concat(x.a.input," ").concat(i),placeholder:l,autoComplete:"off",list:"queries"}),Object(b.jsx)("datalist",{id:"queries",children:u.map((function(e){return Object(b.jsx)("option",{children:e},e)}))})]})},w=n(29),S=n.n(w),N=function(e){var t=e.text,n=e.className,a=void 0===n?"":n,c=e.onClickHandler,r=e.type,s=void 0===r?"button":r,i=e.disabled,o=void 0!==i&&i;return Object(b.jsx)("button",{className:"".concat(S.a.button," ").concat(a),onClick:c,type:s,disabled:o,children:t})},k=n(30),C=n.n(k),I=function(e){var t=e.text,n=e.onClickHandler,a=e.value,c=e.onChangeHandler,r=e.buttonStyles,s=void 0===r?"":r,i=e.inputStyles,o=void 0===i?"":i,l=e.className,u=e.queriesList,d=void 0===u?[]:u,j=e.disabledBtn;return Object(b.jsx)("header",{children:Object(b.jsxs)("form",{className:"".concat(C.a["search-form"]," ").concat(l),onSubmit:n,children:[Object(b.jsx)(y,{placeholder:"Type your query here please",value:a,onChangeHandler:c,className:o,queriesList:d}),Object(b.jsx)(N,{text:t,onClickHandler:n,className:s,disabled:j})]})})},H=n(31),L=n.n(H),B=function(e){var t=e.children,n=e.className,a=void 0===n?"":n;return Object(b.jsx)("main",{className:"".concat(L.a.container," ").concat(a),children:t})},q=n(16),R=n.n(q),E=document.querySelector("#modal-root"),P=function(e){var t=e.children,n=e.onClose;function r(e){"Escape"===e.code&&n()}Object(a.useEffect)((function(){return window.addEventListener("keydown",r),function(){return window.removeEventListener("keydown",r)}}),[]);return Object(c.createPortal)(Object(b.jsx)("div",{className:R.a.overlay,onClick:function(e){e.target===e.currentTarget&&n()},children:Object(b.jsx)("div",{className:R.a["modal-window"],children:t})}),E)},G=n(32),D=n.n(G),T=function(){return Object(b.jsx)(D.a,{type:"Circles",color:"#c9f3e5",height:100,width:100})},U=n(5),A=n.n(U),F=h((function(e){var t=e.API,n=Object(o.a)(),c=Object(i.a)(n,2),r=c[0],l=c[1],u=Object(a.useState)("queries"),d=Object(i.a)(u,1)[0],j=Object(a.useState)(1),h=Object(i.a)(j,2),m=h[0],p=h[1],O=Object(a.useState)(16),f=Object(i.a)(O,1)[0],_=Object(a.useState)(""),v=Object(i.a)(_,2),x=v[0],y=v[1],w=Object(a.useState)(""),S=Object(i.a)(w,2),k=S[0],C=S[1],H=Object(a.useState)(!0),L=Object(i.a)(H,2),q=L[0],R=L[1],E=Object(a.useState)([]),G=Object(i.a)(E,2),D=G[0],U=G[1],F=Object(a.useState)([]),Q=Object(i.a)(F,2),J=Q[0],z=Q[1],M=Object(a.useState)(!1),W=Object(i.a)(M,2),X=W[0],Z=W[1],K=Object(a.useState)(""),V=Object(i.a)(K,2),Y=V[0],$=V[1],ee=Object(a.useState)(!1),te=Object(i.a)(ee,2),ne=te[0],ae=te[1],ce=Object(a.useState)(!0),re=Object(i.a)(ce,2),se=re[0],ie=re[1],oe=Object(a.useState)(!1),le=Object(i.a)(oe,2),ue=le[0],de=le[1],je=Object(a.useState)("We are glad to see you!"),be=Object(i.a)(je,2),he=be[0],me=be[1];Object(a.useEffect)((function(){z(Oe(fe()))}),[t]);var pe=function(e,n,a){var c=r>=768?"landscape":"portrait";de(!0),t.getPhotosBySearchQuery(e,n,a,c).then((function(e){return e.data})).then((function(t){if(0===t.results.length)return me("No content for this query"),ie(!0);U(q?t.results:function(e){return[].concat(Object(s.a)(e),Object(s.a)(t.results))}),ie(!1),function(e,t){if(e===t)return Z(!0);Z(!1)}(e,t.total_pages),C("")})).then((function(){return window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).finally((function(){return de(!1)}))};function Oe(e){return e.slice(-5).reverse()}function fe(){return JSON.parse(localStorage.getItem(d))||[]}var _e=function(){Y&&$(""),ae(!ne)};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(I,{value:k,text:"Click to search",onChangeHandler:function(e){var t=e.target.value;y(t),C(t),p(1),R(!0)},onClickHandler:function(e){e.preventDefault(),pe(m,f,x),p(m+1),x&&function(e){var t=fe();!t.includes(e)&&e&&(t.push(e),z(Oe(t))),localStorage.setItem(d,JSON.stringify(t))}(x),R(!1)},inputStyles:A.a.input,buttonStyles:A.a.button,className:A.a.wrapper,queriesList:J,disabledBtn:!k}),Object(b.jsx)(B,{children:se?Object(b.jsx)("div",{children:Object(b.jsx)("h1",{className:A.a.message,children:he})}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(g,{remoteData:D,imgClickHandler:function(e,t){"IMG"===e.target.nodeName&&($(t),_e(),de(!0))},size:{width:r,height:l}}),D.length>0&&Object(b.jsx)(N,{text:"Load more",onClickHandler:function(e){e.preventDefault(),p(m+1),pe(m,f,x)},disabled:X,className:"".concat(A.a.button," ").concat(A.a["load-more-button"])})]})}),ne&&Object(b.jsxs)(P,{onClose:_e,children:[ue&&Object(b.jsx)(T,{}),Object(b.jsx)("img",{src:Y,alt:"Big variant",onLoad:function(){return de(!1)}})]})]})}));var Q=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(F,{})})},J=n(13),z=n(14),M=n(35),W=n(33),X=n(17),Z=n.n(X);Z.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var K=function(e){Object(M.a)(n,e);var t=Object(W.a)(n);function n(){var e;return Object(J.a)(this,n),(e=t.call(this))._searchByQuery="search/photos",e._random=e._defaultURI,e._collections="",e}return Object(z.a)(n,[{key:"getPhotosBySearchQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._page,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._per_page,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"landscape";return this.getResource(this._searchByQuery,e,t,n,a)}},{key:"getRandom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._page,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._per_page,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"landscape";return this.getResource(this._random,e,t,n)}}]),n}(function(){function e(){Object(J.a)(this,e),this._axios=Z.a,this._baseURL="https://api.unsplash.com/",this._clientID="fpr1x-TL8h1m7d_8hC3jBjbjBA3jalBZ3WE2aS7eksc",this._page=1,this._per_page=20,this._defaultURI="photos/random"}return Object(z.a)(e,[{key:"_getURL",value:function(e){return this._baseURL+e}},{key:"_getQueryParams",value:function(e){return Object.keys(e).reduce((function(t,n,a){return"".concat(t).concat(0!==a?"&":"").concat(n,"=").concat(e[n])}),"?")}},{key:"getResource",value:function(e,t,n,a,c){var r=this._clientID,s=a?{query:a}:{};return this._axios.get(this._getURL(e)+this._getQueryParams(Object(l.a)({client_id:r,page:t,per_page:n,orientation:c},s)),{crossdomain:!0})}}]),e}()),V=new K;r.a.render(Object(b.jsx)(d,{value:V,children:Object(b.jsx)(Q,{})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.c7a12e2e.chunk.js.map